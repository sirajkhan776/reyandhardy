{% extends "base.html" %}
{% block content %}
  <div class="card">
    <div class="card-body">
      <h2 class="mb-2">Pay with Razorpay</h2>
      <p>Order <strong>{{ order.order_number }}</strong> â€” Amount <strong>{{ CURRENCY_SYMBOL }}{{ order.total_amount }}</strong></p>
      <button id="rzp-button" class="btn btn-gradient">Pay Now</button>
      <a href="/checkout/" class="btn btn-link">Back</a>
    </div>
  </div>
{% endblock %}
{% block scripts %}
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <script>
    const options = {
      key: "{{ razorpay_key_id }}",
      amount: "{{ amount_paise }}",
      currency: "INR",
      name: "Rey&Hardy",
      description: "Order {{ order.order_number }}",
      order_id: "{{ order.razorpay_order_id }}",
      callback_url: "/payments/razorpay/callback/",
      prefill: {},
      theme: { color: "#0d6efd" }
    };
    document.getElementById('rzp-button').onclick = function(e){
      var rzp = new Razorpay(options);
      rzp.open();
      e.preventDefault();
    }
  </script>
{% endblock %}
